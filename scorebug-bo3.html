<!DOCTYPE html>
<html>
  <head>
    <title>Scorebug Bo3 | Esports Wales</title>
    <script src="js/WsSubscribers.js"></script>
    <script src="js/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="css/scorebug.css">
  </head>
  <body background="assets/scorebug-bo3.png">
    <div id="blue-score-container" class="score-container">
      <div id="blue-score">5</div>
    </div>

    <div id="orange-score-container" class="score-container">
      <div id="orange-score">5</div>
    </div>

    <div id="timer-container">
      <div id="timer">+ 11:36</div>
    </div>
  </body>

  <script>
    $(() => {
      WsSubscribers.init(49322, false);
      WsSubscribers.subscribe("game", "update_state", (d) => {
        let timeText = "";
        if (d['game']['isOT']) {
            timeText += "+ ";
        }
        timeText += parseInt(Math.ceil(d['game']['time']) / 60) + ":";
        timeText += ("0" + Math.ceil(d['game']['time'] - (parseInt(Math.ceil(d['game']['time']) / 60) * 60))).slice(-2);
        $("#timer").text(timeText);

        if (d['game']['isOT']) {
          $("#timer").addClass("overtime");
        } else {
          $("#timer").removeClass("overtime");
        }

        $("#blue-score").text(d['game']['teams'][0]['score']);
        $("#orange-score").text(d['game']['teams'][1]['score']);
      }); 
    });
  </script>
</html>